@{
    ViewBag.Title = WebChemistry.Web.Controllers.ChargeCalculatorController.AppName;
}

@section CustomMeta {
    <meta name="robots" content="nofollow" />
}

@section CustomStyles {
    @Styles.Render("~/Content/ChargeCalculator/css")
}

<div class="page-header">
    <h1>@WebChemistry.Web.Controllers.ChargeCalculatorController.AppName<br /><small style="font-size: 16pt">Conformationally Dependent Atomic Charges of Quantum Mechanics Quality</small></h1>
</div>

<div class="btn-group" id="help-actions-wrap">
    <a class="btn btn-success btn-large" href="//www.slideshare.net/lukypravda/acc-first" target="_blank" title="1st time user presentation" data-placement="bottom">First Time User</a>
    <a class="btn btn-large btn-success" href="//webchemwiki.biodata.ceitec.cz/ChargeCalculator:FAQ" target="_blank" title="Frequently asked questions" data-placement="bottom">FAQ</a>
    <a class="btn btn-success btn-large" href="//webchemwiki.biodata.ceitec.cz/ChargeCalculator:UserManual" target="_blank" title="Wiki user manual" data-placement="bottom">Wiki Manual</a>
</div>

<div class="alert alert-info" style="text-align: center; margin: 20px 0 35px 0">
    <a class="close" data-dismiss="alert" href="#">&times;</a>
    <b><a href="//acc2.ncbr.muni.cz/ " target="_blank">Atomic Charge Calculator II</a> is now available!</b>
</div>

<div>
    <p style="text-align: justify">
        <b>AtomicChargeCalculator</b> (ACC) is a complex yet intuitive utility for the calculation, visualization
        and analysis of atomic charges for small drug­like molecules, as well as for large biomolecular
        complexes. Up to thousands molecules can be processed in one run. Empirical atomic charges that
        respond to changes in molecular conformation are calculated via an efficient implementation of the
        well established Electronegativity Equalization Method (EEM). ACC allows to use any of the EEM
        parameters sets published in literature. You may download your results, or visualize and analyze them
        directly in the web browser.
    </p>
</div>

<div class="alert alert-success" style="text-align: center; margin: 20px 0 35px 0">
    <a class="close" data-dismiss="alert" href="#">&times;</a>
    <b>What can I do with atomic charges? <a href="//webchemwiki.biodata.ceitec.cz/ChargeCalculator:Motivation" target="_blank">Find out here.</a></b>
</div>

<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#introduction-tab" data-toggle="tab">Quick Help</a></li>
        <li id="samples-header"><a href="#samples" data-toggle="tab" id="samplesTabBtn">Samples</a></li>

        <li style="margin-left: 40px"><a href="#submitComputation" id="charges-submit-tab-link" data-toggle="tab" style="color: #F89507 "><b>Submit a Computation</b></a></li>
        <li class="pull-right"><a href="#cmdVersion" data-toggle="tab" id="cmdTabLink">Command Line Version</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="introduction-tab">
            <p style="text-align: justify">
                This is the <b>ACC Submission Page</b>, where you can setup your calculations or check out useful
                examples. The results of your calculation will be available at a unique URL, which you may access at
                a later time. The results are organized on two levels. The <b>ACC Synopsis page</b> provides an overview
                of the results for all molecules, whereas the <b>ACC Specifics</b> page allows to investigate the results for
                each molecule separately.
            </p>

            <p style="text-align: justify">
                The various sections of the web page offer interactive guides indicated by <button style="margin-top: -2px" class="btn btn-success btn-small" title="Click me for guide."><i class="icon icon-white icon-question-sign"></i></button>
                which give a quick walk through all the main elements of the page.
                Further help is provided by the info icons <button class="btn btn-link btn-small" style="padding: 0 1px; margin-top: -4px" title="Hover or click me for help."><i class="icon icon-question-sign"></i></button>.
                Many tool tips are available by hovering over any graphical or textual element in the interface.
                Refer to the <a href="//webchemwiki.biodata.ceitec.cz/ChargeCalculator:UserManual" target="_blank">Wiki</a> for any clarifications.
            </p>

            <div class="alert-info alert alert-block" style="text-align: center; padding-top: 6px; padding-bottom: 6px; margin-bottom: 0; margin-top: 20px">
                <a class="close" data-dismiss="alert" href="#">&times;</a>
                <b>First Time User?</b> <i>
                    Go through the <a style="font-weight: bold" href="//www.slideshare.net/lukypravda/acc-first" target="_blank">First Time User Presentation</a>, or check out the
                    <button class="btn btn-success btn-small">Help</button> at the top right corner of the page.
                </i>
            </div>

            <div class="charges-samples-preview">
                <a href="#" title="Show more..." onclick="javascript: event.preventDefault(); history.pushState({}, 'Index'); $('#samplesTabBtn').click(); $('#paraSampleBtn').click()">
                    <img src="~/Content/ChargeCalculator/acc-para.jpg" />
                    <div>Paracetamol</div>
                </a><a href="#" title="Show more..." onclick="javascript: event.preventDefault(); history.pushState({}, 'Index'); $('#samplesTabBtn').click(); $('#proteoSampleBtn').click()">
                    <img src="~/Content/ChargeCalculator/acc-proteo.jpg" />
                    <div>Proteasome</div>
                </a><a href="#" title="Show more..." onclick="javascript: event.preventDefault(); history.pushState({}, 'Index'); $('#samplesTabBtn').click(); $('#protegrinSampleBtn').click()">
                    <img src="~/Content/ChargeCalculator/acc-protegrin.jpg" />
                    <div>Protegrin-1</div>
                </a>
            </div>

            <p>
                If you found <b>AtomicChargeCalculator</b> helpful, please cite:<br />
                <small>
                    Ionescu,C.-M., Sehnal,D., Falginella,F.L., Pant,P., Pravda,L., Bouchal,T., Vařeková,R.S., Geidl,S. and and Koča,J. (2015)
                    <a href="//dx.doi.org/10.1186/s13321-015-0099-x" target="_blank">AtomicChargeCalculator: Interactive Web-based calculation of atomic charges in large biomolecular complexes and drug like molecules.</a> J. Cheminform., 7, 50.
                </small>
            </p>

            <hr />

            <p style="text-align: center">
                <img src="~/Images/elixirlogo.png" alt="ELIXIR logo" style="height: 70px" /><br/>
                <small>
                    AtomicChargeCalculator is a part of services provided by <a href="https://www.elixir-czech.cz/" target="_blank">ELIXIR</a> &ndash;
                    European research infrastructure for biological information.
                    For other services provided by ELIXIR's Czech Republic Node visit <a href="https://www.elixir-czech.cz/services" target="_blank">www.elixir-czech.cz/services</a>.
                </small>
            </p>

            <hr />
            <div style="color: #666">
                <h5 style="margin-bottom: 0">License</h5>
                <p style="text-align: justify">
                    <small>
                        Licence conditions in accordance with § 11 of Act No. 130/2002 Coll. The owner of the software is Masaryk University, a public university, ID: 00216224. Masaryk University allows other companies and individuals to use this software free of charge and without territorial restrictions in usual way, that does not depreciate its value. This permission is granted for the duration of property rights. This software is not subject to special information treatment according to Act No. 412/2005 Coll., as amended. In case that a person who will use the software under this licence offer violates the licence terms, the permission to use the software terminates.
                    </small>
                </p>
            </div>
        </div>

        <div class="tab-pane" id="samples">
            @Html.Partial("_Samples")
        </div>

        <div class="tab-pane" id="submitComputation" style="position: relative">
            <div id="upload-form" class="form-horizontal">
                <div class="control-group">
                    <label class="control-label"><b>Molecule(s)</b>: </label>
                    <div class="controls">
                        <div class="fileupload fileupload-new" data-provides="fileupload" style="margin-bottom: 0px">
                            <div class="input-append input-prepend">
                                <span class="add-on">From File </span>
                                <div class="uneditable-input span3"><i class="icon-file fileupload-exists"></i> <span class="fileupload-preview"></span></div><span class="btn btn-file">
                                    <span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span>
                                    <input type="file" name="file" id="fileToUpload" />
                                </span>

                                <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
                            </div>
                        </div>

                        <div style="color: #808080"><small>Select a single file or a <strong>ZIP</strong> file containing <strong>molecule(s)</strong> in <abbr title="PDB, PDBx/mmCIF, PQR, MOL, MOL2, SDF"><strong>supported format</strong></abbr> (50MB limit).</small></div>
                    </div>
                </div>


                <div class="alert alert-block" style="text-align: center">
                    <button type="button" class="close" data-dismiss="alert"><i class="icon-remove"></i></button>
                    <b>
                        Please ensure the molecules are complete and in a relevant conformation before uploading them.
                    </b>
                    <br />
                    See <a href="//webchemwiki.biodata.ceitec.cz/ChargeCalculator:Job_submission#Upload_molecules" target="_blank">this page</a> for complete info about how to prepare input files.
                    @*<small>
                            Appropriate protonation is required for the atomic charges to be chemically relevant.
                            For example, <a href="//nbcr-222.ucsd.edu/pdb2pqr_1.8/" target="_blank">pdb2pqr</a>
                            or <a target="_blank" href="//swift.cmbi.ru.nl/servers/html/htopo.html">WHATIF</a> can be used to add hydrogens.
                        </small>*@
                </div>

                <div style="width: 100%;">
                    <button class="btn btn-large btn-block btn-primary pull-left" style="width: calc(100% - 140px)" id="upload-btn" disabled
                            data-bind="click: upload, enable: canUpload, text: uploadLabel">
                        Select a File to Upload
                    </button>

                    <button class="btn btn-large btn-success dropdown-toggle pull-right" style="width: 130px;" data-bind="click: toggleExamples">Examples</button>
                </div>

                <div style="clear: both"></div>

                <div style="text-align: center"><a href="#" class="hide" id="redirectLink">Click here to configure your computation.</a></div>

                <div style="text-align: right; margin-top: 5px" data-bind="visible: showExamples">
                    <!-- ko foreach: exampleData -->
                    <button class="btn btn-inverse" data-bind="disable: $parent.loadingExample, click: $parent.doExample, html: title, attr: { title: tooltip }"></button>
                    <!-- /ko -->
                </div>

                @Helpers.RecenlySubmittedComputations("ChargeCalculator", "ChargeCalculatorActions.configureAction", typeSingular: "computation", typePlural: "computations")


                <div style="text-align:right">
                    <small style="color: #909090">
                        Service version @ViewBag.ServiceVersion (<a href="@Url.Action("ChangeLog")" target="_blank">change log</a>).
                    </small>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="cmdVersion">
            <h4>Command line version of the ChargeCalculator service</h4>
            <div style="margin-bottom: 10px">
                The command line version provides access to the underlying service. For usage instructions, please consult the
                <a href="//webchemwiki.biodata.ceitec.cz/ChargeCalculator:CMD_Version" target="_blank">Wiki page</a>.
            </div>
            <a href="@Url.Action("DownloadService")" class="btn btn-primary"><i class="icon-download icon-white"></i> Current Version (@ViewBag.ServiceVersion)</a>
            <br />

            <div class="form-inline" id="versionsDownload" style="margin-top: 10px">
                <span>All Versions (<a href="@Url.Action("ChangeLog")" target="_blank">change log</a>): </span>
                <select data-bind="options: versionList, optionsText: 'caption', value: currentVersion" style="width: 130px"></select>
                <a data-bind="attr: { href: currentVersion().link  }" class="btn" style="margin-right: 6px"><i class="icon-download"></i> Download</a>
            </div>
            <br />
        </div>
    </div>
</div>

@section scripts {
    <script type="text/javascript">
        var ChargeCalculatorActions = {
            uploadAction: "@Url.Action("Upload")",
            configureAction: "@Url.Action("Result", "ChargeCalculator", new { id = "-id-" })",
            configureExampleAction: "@Url.Action("Result", "ChargeCalculator", new { id = "-id-", example = "-example-" })",
            exampleAction: "@Url.Action("CreateExample", "ChargeCalculator", new { id = "-id-" })"
        };
    </script>

    @Scripts.Render("~/bundles/ChargeCalculatorIndex")

    <script type="text/javascript">
    @{ var versions = string.Join(",", System.Linq.Enumerable.Select(ViewBag.AllVersions, new Func<WebChemistry.Framework.Core.AppVersion, string>(v => string.Format("{{ link : '{0}', caption: '{1}' }}", Url.Action("DownloadService", new { id = v }), v)))); }
        var versionsModel = {
            versionList: [ @Html.Raw(versions)],
            currentVersion: ko.observable()
        };
        $(function () {
            versionsModel.currentVersion(versionsModel.versionList[0]);
            ko.applyBindings(versionsModel, document.getElementById('versionsDownload'));
        })
    </script>
}
